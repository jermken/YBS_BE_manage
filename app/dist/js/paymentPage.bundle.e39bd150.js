(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{277:function(e,t,a){"use strict";a.r(t);var n=a(435),o=a(314);for(var l in o)"default"!==l&&function(e){a.d(t,e,function(){return o[e]})}(l);a(393);var r=a(11),i=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);i.options.__file="index.vue",t.default=i.exports},314:function(e,t,a){"use strict";a.r(t);var n=a(315),o=a.n(n);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);t.default=o.a},315:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(189)),o=c(a(186)),l=a(35),r=c(a(390)),i=c(a(391)),s=c(a(392));function c(e){return e&&e.__esModule?e:{default:e}}t.default={name:"Payment",components:{OrderDetailDialog:r.default,buyCardDialog:i.default,paymentDialog:s.default},data:function(){return{userInfo:{userType:"1",desc:"",server:"",info:{isVip:!0,id:0}},formRules:{},consumeData:[],localOrderList:[],testServer:[{id:1,name:"小李"},{id:2,name:"小张"},{id:3,name:"小欧"}],orderDetailConf:{visible:!1,order:{userInfo:{info:{}},orderList:[]},title:null},buyCardConfVisible:!1,paymentVisible:!1,paymentInfo:{},paymentType:""}},computed:(0,o.default)({},(0,l.mapGetters)(["globalSize"])),methods:{onUserTypeChange:function(){this.consumeData.length&&(this.consumeData=[])},addGoods:function(){this.consumeData.push({type:"goods",price:"",num:"",server:""})},addProject:function(){this.consumeData.push({type:"project",price:"",num:"",server:""})},addSetMeal:function(){this.consumeData.push({type:"set_meal",price:"",num:"",server:""})},addSetProject:function(){this.consumeData.push({type:"set_project",price:"",num:"",server:""})},buyCard:function(){this.buyCardConfVisible=!0,this.paymentType="card"},recharge:function(){this.paymentType="recharge"},deleteItem:function(e){this.consumeData.splice(e,1)},setPercent:function(e){this.consumeData[e].percent={names:[],num:[]},this.consumeData=JSON.parse((0,n.default)(this.consumeData))},deletePercent:function(e){delete this.consumeData[e].percent,this.consumeData=JSON.parse((0,n.default)(this.consumeData))},saveOrder:function(){for(var e=0,t=0;t<this.consumeData.length;t++)e+=this.consumeData[t].price*this.consumeData[t].num;var a={userInfo:this.userInfo,orderList:this.consumeData,date:+new Date,total:e},o=localStorage.getItem("local_order")&&JSON.parse(localStorage.getItem("local_order"))||[];o.push(a),localStorage.setItem("local_order",(0,n.default)(o)),this.$notify({title:"保存成功！",type:"success"}),this.$refs.userInfoForm&&this.$refs.userInfoForm.resetFields(),this.consumeData=[],this.updateLocalOrder()},payment:function(e){if(e)this.paymentInfo=e;else{for(var t=0,a=0;a<this.consumeData.length;a++)t+=this.consumeData[a].price*this.consumeData[a].num;this.paymentInfo={userInfo:this.userInfo,orderList:this.consumeData,date:+new Date,total:t}}this.paymentType="project",this.showPaymentDialog()},updateLocalOrder:function(){var e=localStorage.getItem("local_order")&&JSON.parse(localStorage.getItem("local_order"))||[];this.localOrderList=e},showUnPayOrderDetail:function(e){this.orderDetailConf={title:"未支付订单",visible:!0,order:e}},deleteUnPayOrder:function(e){var t=localStorage.getItem("local_order")&&JSON.parse(localStorage.getItem("local_order"))||[],a=t.findIndex(function(t){return t.date===e.date});a>-1&&(t.splice(a,1),localStorage.setItem("local_order",(0,n.default)(t)),this.updateLocalOrder())},closeOrderDetailDialog:function(e){this.orderDetailConf.visible=!1,e&&this.updateLocalOrder()},closeBuyCardDialog:function(e){this.buyCardConfVisible=!1,e&&this.updateLocalOrder()},showPaymentDialog:function(){this.paymentVisible=!0},closePaymentDialog:function(e){this.paymentVisible=!1,e&&console.log(1111)}},mounted:function(){this.updateLocalOrder()}}},316:function(e,t,a){"use strict";a.r(t);var n=a(317),o=a.n(n);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);t.default=o.a},317:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(189)),o=r(a(186)),l=a(35);function r(e){return e&&e.__esModule?e:{default:e}}t.default={name:"OrderDetailDialog",props:{config:{type:Object,required:!0}},data:function(){return{testServer:[{id:1,name:"小李"},{id:2,name:"小张"},{id:3,name:"小欧"}],formRules:{}}},computed:(0,o.default)({},(0,l.mapGetters)(["globalSize"]),{dialogShow:function(){return this.config.visible},userInfo:function(){return console.log(this.config.order.userInfo,88888888),this.config.order.userInfo},orderList:function(){return this.config.order.orderList}}),watch:{},methods:{beforeClose:function(){this.$emit("closed")},resetFields:function(){},addGoods:function(){},addProject:function(){},addSetMeal:function(){},addSetProject:function(){},deleteItem:function(){},cancelEvent:function(){this.$emit("closed")},saveOrder:function(){var e=this,t={userInfo:this.userInfo,orderList:this.orderList,date:+new Date},a=localStorage.getItem("local_order")&&JSON.parse(localStorage.getItem("local_order"))||[],o=a.findIndex(function(t){return t.date===e.config.order.date});o>-1&&a.splice(o,1,t),localStorage.setItem("local_order",(0,n.default)(a)),this.$notify({title:"保存成功！",type:"success"}),this.$emit("closed",!0)},payment:function(e){e&&console.log(e)}}}},318:function(e,t,a){"use strict";a.r(t);var n=a(319),o=a.n(n);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);t.default=o.a},319:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(a(186)),o=a(35);t.default={name:"BuyCard",props:{user_id:null,server_id:null,show:!1},data:function(){return{cardInfo:{name:"",price:"",payment:""},formRules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],payment:[{required:!0,message:"请填写实收金额",trigger:"blur"}]},cardList:[{id:1,name:"贵宾卡",price:500},{id:2,name:"仙女卡",price:1e3},{id:1,name:"女神卡",price:200}]}},watch:{},computed:(0,n.default)({},(0,o.mapGetters)(["globalSize"]),{dialogShow:function(){return this.show}}),methods:{cancelEvent:function(){this.$emit("closed")},confirmEvent:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;alert("success"),t.$emit("topayment")})},beforeClose:function(){this.$emit("closed")},resetFields:function(e){this.$refs[e].resetFields()},selectCard:function(e){var t=this.cardList.findIndex(function(t){return t.id===e});this.cardInfo=this.cardList[t]}},mounted:function(){}}},320:function(e,t,a){"use strict";a.r(t);var n=a(321),o=a.n(n);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);t.default=o.a},321:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(186)),o=r(a(191)),l=a(35);function r(e){return e&&e.__esModule?e:{default:e}}t.default={name:"Payment",props:{show:!1,type:"",info:{}},data:function(){return{paymentInfo:{orderList:[],userInfo:{},pay_type:[],card_minu:"",pay_amount:"",no_pay:"",total:""},paymentType:{project:"商品或服务",card:"开卡",recharge:"充值"},formRules:{pay_amount:[{required:!0,message:"收款金额必填（数字）",trigger:"blur"}],pay_type:[{required:!0,message:"付款方式必选",trigger:"change"}]},payType:[{label:"微信",value:"wechat"},{label:"支付宝",value:"alipay"},{label:"现金",value:"cash"},{label:"银行卡",value:"bankCard"},{label:"扣卡",value:"cardMinu"}]}},watch:{info:function(e){this.paymentInfo=(0,o.default)({},this.paymentInfo,e)}},computed:(0,n.default)({},(0,l.mapGetters)(["globalSize"]),{dialogShow:function(){return this.show}}),methods:{cancelEvent:function(){this.$emit("closed")},confirmEvent:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;alert("success"),t.$emit("closed",!0)})},beforeClose:function(){this.$emit("closed")},resetFields:function(e){this.$refs[e].resetFields()}},mounted:function(){}}},322:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var n=a(451),o=a(316);for(var l in o)"default"!==l&&function(e){a.d(t,e,function(){return o[e]})}(l);var r=a(11),i=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);i.options.__file="orderDetail.vue",t.default=i.exports},391:function(e,t,a){"use strict";a.r(t);var n=a(450),o=a(318);for(var l in o)"default"!==l&&function(e){a.d(t,e,function(){return o[e]})}(l);var r=a(11),i=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);i.options.__file="buyCard.vue",t.default=i.exports},392:function(e,t,a){"use strict";a.r(t);var n=a(454),o=a(320);for(var l in o)"default"!==l&&function(e){a.d(t,e,function(){return o[e]})}(l);var r=a(11),i=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);i.options.__file="payment.vue",t.default=i.exports},393:function(e,t,a){"use strict";var n=a(322);a.n(n).a},435:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payment-page"},[a("div",{staticClass:"payment-page-top"},[a("div",{staticClass:"payment-page-top__left"},[a("span",{staticClass:"payment-title"},[e._v("客户信息")]),e._v(" "),a("el-form",{ref:"userInfoForm",attrs:{model:e.userInfo,"status-icon":"",rules:e.formRules,size:e.globalSize,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客户类别"}},[a("el-radio-group",{on:{change:e.onUserTypeChange},model:{value:e.userInfo.userType,callback:function(t){e.$set(e.userInfo,"userType",t)},expression:"userInfo.userType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("游客")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("客户")])],1)],1),e._v(" "),1==e.userInfo.userType?a("el-form-item",{attrs:{label:"游客姓名"}},[a("el-input",{staticStyle:{width:"60% !important"},attrs:{placeholder:"请输入游客姓名"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1):a("el-form-item",{attrs:{label:"客户姓名"}},[a("el-input",{staticStyle:{width:"60% !important"},attrs:{placeholder:"请输入客户姓名"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}}),e._v(" "),e.userInfo.info.isVip?a("span",{staticClass:"vip-tips"},[e._v("（会员）")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"美容师"}},[a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师"},model:{value:e.userInfo.server,callback:function(t){e.$set(e.userInfo,"server",t)},expression:"userInfo.server"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:!1},model:{value:e.userInfo.desc,callback:function(t){e.$set(e.userInfo,"desc",t)},expression:"userInfo.desc"}})],1),e._v(" "),a("el-form-item",{class:{"dis-visible":!(2==e.userInfo.userType&&e.userInfo.info.isVip)},attrs:{label:"卡内余额"}},[a("el-input",{attrs:{disabled:""}})],1),e._v(" "),a("el-form-item",{class:{"dis-visible":!(2==e.userInfo.userType&&e.userInfo.info.isVip)},attrs:{label:"赠送金额"}},[a("el-input",{attrs:{disabled:""}})],1)],1)],1),e._v(" "),a("div",{staticClass:"payment-page-top__right"},[a("span",{staticClass:"payment-title"},[e._v("未支付订单")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:e.globalSize,data:e.localOrderList,height:"300px"}},[a("el-table-column",{attrs:{label:"客户姓名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userInfo.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"主美容师",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userInfo.server))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单总金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.total))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:e.globalSize},on:{click:function(a){e.deleteUnPayOrder(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:e.globalSize},on:{click:function(a){e.showUnPayOrderDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:e.globalSize},on:{click:function(a){e.payment(t.row)}}},[e._v("结账")])]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"payment-page-bottom"},[a("span",{staticClass:"payment-title"},[e._v("消费明细")]),e._v(" "),a("span",{staticClass:"add-project-wrapper"},[a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addGoods}},[e._v("商品出售")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addProject}},[e._v("项目服务")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus",disabled:1==e.userInfo.userType},on:{click:e.addSetMeal}},[e._v("套餐项目")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addSetProject}},[e._v("自定义项目")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",round:"",disabled:!(2==e.userInfo.userType&&e.userInfo.name&&e.userInfo.server)},on:{click:e.buyCard}},[e._v("开卡服务")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",round:"",disabled:!(2==e.userInfo.userType&&e.userInfo.name&&e.userInfo.server)},on:{click:e.recharge}},[e._v("充值服务")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:e.globalSize,data:e.consumeData,"max-height":"330"}},[a("el-table-column",{attrs:{prop:"type",label:"项目类别",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["goods"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入商品名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"project"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入项目名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"set_meal"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入套餐项目"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"set_project"==t.row.type?a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入自定义项目"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入价格"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"数量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入数量"},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"server",label:"美容师",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师"},model:{value:t.row.server,callback:function(a){e.$set(t.row,"server",a)},expression:"scope.row.server"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"percent",label:"比例设置",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[t.row.percent?a("div",[a("el-select",{staticStyle:{width:"55%!important"},attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师",multiple:""},model:{value:t.row.percent.names,callback:function(a){e.$set(t.row.percent,"names",a)},expression:"scope.row.percent.names"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{disabled:2==t.row.percent.names.length,label:e.name,value:e.name}})})),e._v(" "),a("el-input",{staticStyle:{width:"15% !important"},attrs:{maxlength:"1",size:e.globalSize},model:{value:t.row.percent.num[0],callback:function(a){e.$set(t.row.percent.num,0,a)},expression:"scope.row.percent.num[0]"}}),e._v(" "),a("span",[e._v("/")]),e._v(" "),a("el-input",{staticStyle:{width:"15% !important"},attrs:{maxlength:"1",size:e.globalSize},model:{value:t.row.percent.num[1],callback:function(a){e.$set(t.row.percent.num,1,a)},expression:"scope.row.percent.num[1]"}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",circle:"",size:e.globalSize},on:{click:function(a){e.deletePercent(t.$index)}}})],1):a("div",[a("el-button",{attrs:{icon:"el-icon-edit",size:e.globalSize,type:"primary",plain:"",round:""},on:{click:function(a){e.setPercent(t.$index)}}},[e._v("设置")])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-remove",circle:"",size:e.globalSize},on:{click:function(a){e.deleteItem(t.$index)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"order-action-wrapper"},[a("el-button",{attrs:{type:"primary",disabled:!e.consumeData.length,icon:"el-icon-edit-outline"},on:{click:e.saveOrder}},[e._v("保存订单")]),e._v(" "),a("el-button",{attrs:{type:"warning",disabled:!e.consumeData.length,icon:"el-icon-date"},on:{click:e.payment}},[e._v("结账")])],1)],1),e._v(" "),a("order-detail-dialog",{attrs:{config:e.orderDetailConf},on:{closed:e.closeOrderDetailDialog}}),e._v(" "),a("buy-card-dialog",{attrs:{show:e.buyCardConfVisible,user_id:e.userInfo.info.id,server_id:e.userInfo.server},on:{"update:show":function(t){e.buyCardConfVisible=t},closed:e.closeBuyCardDialog,topayment:e.showPaymentDialog}}),e._v(" "),a("payment-dialog",{attrs:{show:e.paymentVisible,info:e.paymentInfo,type:e.paymentType},on:{"update:show":function(t){e.paymentVisible=t},closed:e.closePaymentDialog}})],1)},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},450:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogShow,title:"卡类信息",width:"500px","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogShow=t},close:function(t){e.resetFields("buyCardForm")}}},[a("el-form",{ref:"buyCardForm",attrs:{model:e.cardInfo,"status-icon":"",rules:e.formRules,size:e.globalSize}},[a("el-form-item",{attrs:{required:"",label:"卡类名称","label-width":"80px",prop:"name"}},[a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入卡类名称"},on:{change:e.selectCard},model:{value:e.cardInfo.name,callback:function(t){e.$set(e.cardInfo,"name",t)},expression:"cardInfo.name"}},e._l(e.cardList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e.cardInfo.name?a("el-form-item",{attrs:{label:"卡类价格","label-width":"80px",prop:"price"}},[a("el-input",{attrs:{disabled:"",width:"60%"},model:{value:e.cardInfo.price,callback:function(t){e.$set(e.cardInfo,"price",t)},expression:"cardInfo.price"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"实收金额","label-width":"80px",prop:"payment"}},[a("el-input",{attrs:{placeholder:"请输入需支付金额"},model:{value:e.cardInfo.payment,callback:function(t){e.$set(e.cardInfo,"payment",t)},expression:"cardInfo.payment"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.globalSize},on:{click:e.cancelEvent}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary"},on:{click:function(t){e.confirmEvent("buyCardForm")}}},[e._v("结账")])],1)],1)},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},451:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogShow,"close-on-click-modal":!1,title:e.config.title+"详情",width:"1240px","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogShow=t},close:e.resetFields}},[a("div",{staticClass:"user-info-wrapper"},[a("span",{staticClass:"payment-title"},[e._v("客户信息")]),e._v(" "),a("el-form",{ref:"userInfoForm",attrs:{model:e.userInfo,"status-icon":"",rules:e.formRules,"label-suffix":"：",inline:"",size:e.globalSize,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"客户类别"}},[a("el-radio-group",{model:{value:e.userInfo.userType,callback:function(t){e.$set(e.userInfo,"userType",t)},expression:"userInfo.userType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("游客")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("客户")])],1)],1),e._v(" "),1==e.userInfo.userType?a("el-form-item",{attrs:{label:"游客姓名"}},[a("el-input",{attrs:{placeholder:"请输入游客姓名"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1):e._e(),e._v(" "),1==e.userInfo.userType?a("el-form-item",{attrs:{label:"美容师"}},[a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师"},model:{value:e.userInfo.server,callback:function(t){e.$set(e.userInfo,"server",t)},expression:"userInfo.server"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1):a("el-form-item",{attrs:{label:"客户姓名"}},[a("el-input",{attrs:{placeholder:"请输入客户姓名"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}}),e._v(" "),e.userInfo.info.isVip?a("span",{staticClass:"vip-tips"},[e._v("（会员）")]):e._e()],1),e._v(" "),2==e.userInfo.userType&&e.userInfo.info.isVip?a("el-form-item",{attrs:{label:"卡内余额"}},[a("el-input",{attrs:{disabled:""}})],1):e._e(),e._v(" "),2==e.userInfo.userType&&e.userInfo.info.isVip?a("el-form-item",{attrs:{label:"赠送金额"}},[a("el-input",{attrs:{disabled:""}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:!1},model:{value:e.userInfo.desc,callback:function(t){e.$set(e.userInfo,"desc",t)},expression:"userInfo.desc"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"order-wrapper"},[a("span",{staticClass:"payment-title"},[e._v("消费明细")]),e._v(" "),a("span",{staticClass:"add-project-wrapper"},[a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addGoods}},[e._v("商品出售")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addProject}},[e._v("项目服务")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addSetMeal}},[e._v("套餐项目")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary",icon:"el-icon-plus"},on:{click:e.addSetProject}},[e._v("自定义项目")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",size:e.globalSize,data:e.orderList,"max-height":"330"}},[a("el-table-column",{attrs:{prop:"type",label:"项目类别",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["goods"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入商品名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"project"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入项目名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"set_meal"==t.row.type?a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请输入套餐项目"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},[a("el-option")],1):e._e(),e._v(" "),"set_project"==t.row.type?a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入自定义项目"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入价格"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"数量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.globalSize,placeholder:"请输入数量"},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"server",label:"美容师",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师"},model:{value:t.row.server,callback:function(a){e.$set(t.row,"server",a)},expression:"scope.row.server"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"percent",label:"比例设置",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[t.row.percent?a("div",[a("el-select",{staticStyle:{width:"55%!important"},attrs:{size:e.globalSize,filterable:"",placeholder:"请选择美容师",multiple:""},model:{value:t.row.percent.names,callback:function(a){e.$set(t.row.percent,"names",a)},expression:"scope.row.percent.names"}},e._l(e.testServer,function(e){return a("el-option",{key:e.id,attrs:{disabled:2==t.row.percent.names.length,label:e.name,value:e.name}})})),e._v(" "),a("el-input",{staticStyle:{width:"15% !important"},attrs:{maxlength:"1",size:e.globalSize},model:{value:t.row.percent.num[0],callback:function(a){e.$set(t.row.percent.num,0,a)},expression:"scope.row.percent.num[0]"}}),e._v(" "),a("span",[e._v("/")]),e._v(" "),a("el-input",{staticStyle:{width:"15% !important"},attrs:{maxlength:"1",size:e.globalSize},model:{value:t.row.percent.num[1],callback:function(a){e.$set(t.row.percent.num,1,a)},expression:"scope.row.percent.num[1]"}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",circle:"",size:e.globalSize},on:{click:function(a){e.deletePercent(t.$index)}}})],1):a("div",[a("el-button",{attrs:{icon:"el-icon-edit",size:e.globalSize,type:"primary",plain:"",round:""},on:{click:function(a){e.setPercent(t.$index)}}},[e._v("设置")])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-remove",circle:"",size:e.globalSize},on:{click:function(a){e.deleteItem(t.$index)}}})]}}])})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelEvent}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.orderList.length,icon:"el-icon-edit-outline"},on:{click:e.saveOrder}},[e._v("保存订单")]),e._v(" "),a("el-button",{attrs:{type:"warning",disabled:!e.orderList.length,icon:"el-icon-date"},on:{click:e.payment}},[e._v("结账")])],1)])},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},454:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogShow,title:"请确认账单信息是否有误",width:"500px","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogShow=t},close:function(t){e.resetFields("paymentForm")}}},[a("el-form",{ref:"paymentForm",attrs:{model:e.paymentInfo,"status-icon":"",rules:e.formRules,size:e.globalSize}},[a("el-form-item",{attrs:{label:"顾客","label-width":"100px",prop:"name"}},[a("el-input",{staticStyle:{width:"50%!important"},attrs:{disabled:""},model:{value:e.paymentInfo.userInfo.name,callback:function(t){e.$set(e.paymentInfo.userInfo,"name",t)},expression:"paymentInfo.userInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账单类别","label-width":"100px",prop:"paymentType"}},[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.paymentType[e.type]))])],1),e._v(" "),a("el-form-item",{attrs:{label:"账单总金额","label-width":"100px",prop:"total"}},[a("el-input",{staticStyle:{width:"50%!important"},attrs:{disabled:""},model:{value:e.paymentInfo.total,callback:function(t){e.$set(e.paymentInfo,"total",t)},expression:"paymentInfo.total"}})],1),e._v(" "),"project"===e.type?a("el-form-item",{attrs:{label:"扣卡金额","label-width":"100px",prop:"card_minu"}},[a("el-input",{staticStyle:{width:"50%!important"},model:{value:e.paymentInfo.card_minu,callback:function(t){e.$set(e.paymentInfo,"card_minu",t)},expression:"paymentInfo.card_minu"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{required:"",label:"实收金额","label-width":"100px",prop:"pay_amount"}},[a("el-input",{staticStyle:{width:"50%!important"},attrs:{placeholder:"请输入需支付金额"},model:{value:e.paymentInfo.pay_amount,callback:function(t){e.$set(e.paymentInfo,"pay_amount",t)},expression:"paymentInfo.pay_amount"}})],1),e._v(" "),"recharge"===e.type||"card"===e.type?a("el-form-item",{attrs:{required:"",label:"赠送金额","label-width":"100px",prop:"present_amount"}},[a("el-input",{staticStyle:{width:"50%!important"},attrs:{placeholder:"请输入需支付金额"},model:{value:e.paymentInfo.present_amount,callback:function(t){e.$set(e.paymentInfo,"present_amount",t)},expression:"paymentInfo.present_amount"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"未付金额","label-width":"100px",prop:"no_pay"}},[a("el-input",{staticStyle:{width:"50%!important"},attrs:{placeholder:"请输入需支付金额"},model:{value:e.paymentInfo.no_pay,callback:function(t){e.$set(e.paymentInfo,"no_pay",t)},expression:"paymentInfo.no_pay"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"付款方式","label-width":"100px",prop:"pay_type"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择支付方式",multiple:""},model:{value:e.paymentInfo.pay_type,callback:function(t){e.$set(e.paymentInfo,"pay_type",t)},expression:"paymentInfo.pay_type"}},e._l(e.payType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.globalSize},on:{click:e.cancelEvent}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:e.globalSize,type:"primary"},on:{click:function(t){e.confirmEvent("paymentForm")}}},[e._v("提交")])],1)],1)},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})}}]);